
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>4.1.2. Create templates &#8212; PyMPA 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.1.3. Calculate Travel Times" href="input.calculate_ttimes.html" />
    <link rel="prev" title="4.1.1. Download data" href="input.download_data.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     

  </head><body>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="input.calculate_ttimes.html" title="4.1.3. Calculate Travel Times"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="input.download_data.html" title="4.1.1. Download data"
             accesskey="P">previous</a> |</li>
    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    
    <a href="../index.html">PyMPA 1.0.0 documentation</a> &#187;
    

          <li class="nav-item nav-item-1"><a href="../input.html" accesskey="U">4. Preprocessing Input</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="create-templates">
<h1>4.1.2. Create templates<a class="headerlink" href="#create-templates" title="Permalink to this headline">¶</a></h1>
<p>Actually templates are created by trimming a fixed time window focused on S-wave theoretical travel times. For details on the travel time calculations see <a class="reference external" href="file:///Users/vuan/PycharmProjects/PyMPA37/docs/build/html/tutorial.html#calculate-travel-times">file:///Users/vuan/PycharmProjects/PyMPA37/docs/build/html/tutorial.html#calculate-travel-times</a>.</p>
<p>The length of the time window is established by the inter-statiion network distance and the frequency range used.
The user should carefully check to exclude signal deriving from numerical artifacts (e.g. filtering applied to zero padding
time windows having no data), or pre and coda signals not connected with the seismic perturbation investigated (e.g. LFEs, earthquakes, icequakes etc…)
In the next versions the trimming will allow for selecting variable length P and S-waves.</p>
<p>Needed files:</p>
<ul class="simple">
<li><p>Events in a catalog: e.g. templates.zmap (quakeml or zmap format) see ObsPy for more details. An example of zmap file format is given here below (ZMAP is a simple 10 column CSV file (technically TSV) format for basic catalog data. It originates from ZMAP, a Matlab® based earthquake statistics package (see [Wiemer2001]).</p></li>
<li><p>Columns represent: longitude, latitude, year, month, day, magnitude, depth, hour, minute, second - note that fields have to be separated by tabs.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">13.38347</span> <span class="mf">42.38842</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.3</span> <span class="mf">11.180</span> <span class="mi">14</span> <span class="mi">04</span> <span class="mf">34.50</span>
<span class="mf">13.38981</span> <span class="mf">42.33004</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.5</span> <span class="mf">9.170</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mf">4.32</span>
<span class="mf">13.39447</span> <span class="mf">42.32878</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.6</span> <span class="mf">9.610</span> <span class="mi">14</span> <span class="mi">16</span> <span class="mf">6.35</span>
<span class="mf">13.40577</span> <span class="mf">42.31941</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.4</span> <span class="mf">5.370</span> <span class="mi">14</span> <span class="mi">17</span> <span class="mf">1.74</span>
<span class="mf">13.36791</span> <span class="mf">42.59639</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.3</span> <span class="mf">5.710</span> <span class="mi">14</span> <span class="mi">35</span> <span class="mf">16.74</span>
<span class="mf">13.45651</span> <span class="mf">42.25600</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.3</span> <span class="mf">5.620</span> <span class="mi">14</span> <span class="mi">42</span> <span class="mf">23.29</span>
<span class="mf">13.38686</span> <span class="mf">42.31381</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.2</span> <span class="mf">6.270</span> <span class="mi">15</span> <span class="mi">10</span> <span class="mf">34.73</span>
<span class="mf">13.49527</span> <span class="mf">42.30006</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">0.9</span> <span class="mf">6.810</span> <span class="mi">15</span> <span class="mi">21</span> <span class="mf">2.28</span>
<span class="mf">13.32714</span> <span class="mf">42.33182</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.4</span> <span class="mf">6.210</span> <span class="mi">15</span> <span class="mi">40</span> <span class="mf">5.62</span>
<span class="mf">13.29606</span> <span class="mf">42.27235</span> <span class="mi">2009</span> <span class="mi">03</span> <span class="mi">30</span> <span class="mf">1.2</span> <span class="mf">8.690</span> <span class="mi">15</span> <span class="mi">53</span> <span class="mf">5.35</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Suitable velocity model for computing travel times</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aquila</span> <span class="o">+</span> <span class="n">ak135</span>
<span class="n">depth</span> <span class="n">P</span> <span class="n">vel</span><span class="o">.</span> <span class="n">S</span> <span class="n">vel</span><span class="o">.</span> <span class="n">density</span> <span class="n">older</span> <span class="n">density</span>
     <span class="mf">0.000</span>      <span class="mf">3.7500</span>      <span class="mf">2.1650</span>      <span class="mf">2.4500</span> 
     <span class="mf">1.500</span>      <span class="mf">3.7500</span>      <span class="mf">2.1710</span>      <span class="mf">2.4500</span>
     <span class="mf">1.510</span>      <span class="mf">4.9400</span>      <span class="mf">2.8520</span>      <span class="mf">2.7800</span>
     <span class="mf">4.510</span>      <span class="mf">4.9400</span>      <span class="mf">2.8580</span>      <span class="mf">2.7800</span>
     <span class="mf">4.520</span>      <span class="mf">6.0100</span>      <span class="mf">3.2790</span>      <span class="mf">2.7600</span>
    <span class="mf">14.520</span>      <span class="mf">6.0100</span>      <span class="mf">3.2850</span>      <span class="mf">2.7600</span>
    <span class="mf">14.530</span>      <span class="mf">5.5500</span>      <span class="mf">3.3950</span>      <span class="mf">2.9100</span>
    <span class="mf">29.530</span>      <span class="mf">5.5500</span>      <span class="mf">3.4010</span>      <span class="mf">2.9100</span>
    <span class="mf">29.540</span>      <span class="mf">5.8800</span>      <span class="mf">4.0990</span>      <span class="mf">3.1000</span>
    <span class="mf">43.540</span>      <span class="mf">5.8800</span>      <span class="mf">4.1050</span>      <span class="mf">3.1000</span>
    <span class="mf">43.550</span>      <span class="mf">5.8800</span>      <span class="mf">4.5610</span>      <span class="mf">3.1000</span>
    <span class="mf">57.500</span>      <span class="mf">5.8800</span>      <span class="mf">3.3600</span>      <span class="mf">3.1000</span>
    <span class="mf">57.500</span>      <span class="mf">7.1100</span>      <span class="mf">4.0100</span>      <span class="mf">3.2300</span>
    <span class="mf">93.000</span>      <span class="mf">7.1100</span>      <span class="mf">4.0100</span>      <span class="mf">3.2300</span>
    <span class="mf">93.000</span>      <span class="mf">7.1000</span>      <span class="mf">3.9900</span>      <span class="mf">3.3000</span>
   <span class="mf">136.500</span>      <span class="mf">7.1000</span>      <span class="mf">3.9900</span>      <span class="mf">3.3000</span> 
   <span class="mf">165.000</span>      <span class="mf">8.1750</span>      <span class="mf">4.5090</span>      <span class="mf">3.3487</span> 
   <span class="mf">210.000</span>      <span class="mf">8.3000</span>      <span class="mf">4.5180</span>      <span class="mf">3.3960</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Station inventory (format consistent with ObsPy read_inventory routine see <a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.read_inventory.html">https://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.read_inventory.html</a>)</p></li>
<li><p>Days to process: one column file including days to process e.g. lista1</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">090330</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set parameters: e.g. trim.par</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Line 1 -- list of stations</span>
<span class="c1">#Line 2 -- list of channels</span>
<span class="c1">#Line 3 -- list of networks</span>
<span class="c1">#Line 4 -- Lowpass frequency</span>
<span class="c1">#Line 5 -- Highpass frequency</span>
<span class="c1">#Line 6 -- Trimmed Time before S-wave</span>
<span class="c1">#Line 7 -- Trimmed Time after S-wave</span>
<span class="c1">#Line 8 -- UTC precision</span>
<span class="c1">#Line 9 -- Continuous data dir</span>
<span class="c1">#Line 10 -- Template data dir</span>
<span class="c1">#Line 11 -- Processing days list </span>
<span class="c1">#Line 12 -- Zmap catalog</span>
<span class="c1">#Line 13 -- Starting template</span>
<span class="c1">#Line 14 -- Stopping template</span>
<span class="c1">#Line 15 -- Taup Model</span>
<span class="n">AQU</span> <span class="n">CAMP</span> <span class="n">CERT</span> <span class="n">FAGN</span> <span class="n">FIAM</span> <span class="n">GUAR</span> <span class="n">INTR</span> <span class="n">MNS</span> <span class="n">NRCA</span> <span class="n">TERO</span>
<span class="n">BHE</span> <span class="n">BHN</span> <span class="n">BHZ</span>
<span class="n">IV</span> <span class="n">MN</span>
<span class="mf">2.0</span>
<span class="mf">8.0</span>
<span class="mf">2.5</span>
<span class="mf">2.5</span>
<span class="mi">6</span>
<span class="mi">24</span><span class="n">h</span>
<span class="n">template</span>
<span class="n">lista1</span>
<span class="n">templates</span><span class="o">.</span><span class="n">zmap</span>
<span class="mi">26</span>
<span class="mi">27</span>
<span class="n">aquila_kato</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Directory i.e. ./24h where 24h continuous data are stored</p></li>
<li><p>Output dir i.e. ./template (find trimmed time series)</p></li>
</ul>
<p>Note that input and output file names, inventories, template catalogs, velocity models are recalled also in the next steps and remain almost fixed. Parameters in files .par could change.</p>
<p>References
Wiemer S. (2001), A software package to analyzeseismicity: ZMAP, Seismol Res Lett 92, 373-382</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="input.download_data.html"
                        title="previous chapter">4.1.1. Download data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="input.calculate_ttimes.html"
                        title="next chapter">4.1.3. Calculate Travel Times</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/sub/input.create_templates.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="input.calculate_ttimes.html" title="4.1.3. Calculate Travel Times"
             >next</a> |</li>
        <li class="right" >
          <a href="input.download_data.html" title="4.1.1. Download data"
             >previous</a> |</li>
    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    
    <a href="../index.html">PyMPA 1.0.0 documentation</a> &#187;
    

          <li class="nav-item nav-item-1"><a href="../input.html" >4. Preprocessing Input</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2019, Alessandro Vuan and Monica Sugan.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Last updated on None.
    
    <br />

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.0.0b1.
    </div>

  </body>
</html>